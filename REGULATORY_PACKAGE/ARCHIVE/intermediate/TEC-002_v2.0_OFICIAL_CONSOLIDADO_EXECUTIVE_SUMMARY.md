# TEC-002 — Risk Management File (RMF)

**Código:** TEC-002
**Versão:** v2.0 OFICIAL CONSOLIDADO AUTHORITATIVE
**Data:** 2025-10-08
**Autores:** Risk Management Team | Abel Costa (Consolidation)
**Revisores:** {Clinical Lead} | {Quality Manager} | {Security Officer}
**Aprovadores:** {Regulatory Affairs} | {CEO}
**Status:** QW-011 Consolidated - Ready for ANVISA Submission
**Confidencialidade:** Confidencial

**CONSOLIDATION NOTE:**
This document consolidates 36+ TEC-002 versions found across archive directories (fernanda v1.2, fernanda v1.1, paulo, carlos, etc.) into a single authoritative ISO 14971:2019-compliant baseline. Key enhancements:
- Comprehensive hazard analysis (34 hazards: functional, ML-specific, cybersecurity, usability)
- Integration of SEC-001 cybersecurity risks (RISK-HD-CYB-001 to RISK-HD-CYB-010)
- New RISK-HD-016 pediatric misdiagnosis risk (from SRS-001 v2.1 REQ-HD-016)
- Updated RISK-HD-001 performance timeout risk (from SRS-001 v2.1 NFR-001 P99 ≤5s)
- Complete traceability matrix (REQ ↔ RISK ↔ TEST ↔ IFU ↔ PMS)
- ISO 14971:2019 + AAMI TIR34971:2023 (AI/ML risk management) compliance
- Residual risk analysis with ALARP justification
- Risk/benefit analysis demonstrating net clinical benefit

---

## Executive Summary

This **Risk Management File (RMF)** documents systematic risk management for **HemoDoctor SaMD** (Class C / ANVISA Class III) per:
- **ISO 14971:2019** - Application of risk management to medical devices
- **ISO/TR 24971:2020** - Guidance on ISO 14971
- **AAMI TIR34971:2023** - Risk management for AI/ML-enabled medical devices
- **IEC 62304:2006+AMD1:2015** - Medical device software lifecycle (Class C)
- **ANVISA RDC 657/2022** - Cybersecurity requirements for medical devices
- **FDA Guidance** - Clinical Decision Support Software

**Key Results:**
- **34 hazards identified** across 7 risk categories (Algorithm, Usability, Integration, Cybersecurity, ML Drift, Performance, Pediatric)
- **All residual risks ≤ MEDIUM** (acceptable per risk acceptability criteria)
- **Zero HIGH or CRITICAL residual risks** after control implementation
- **Risk/Benefit Analysis:** Net clinical benefit (faster TTD, reduced diagnostic errors) outweighs residual risks
- **Post-Market Surveillance:** PMS-001 monitors residual risks continuously

---

## Table of Contents

1. [Scope and Methodology](#1-scope-and-methodology)
2. [Risk Management Process](#2-risk-management-process)
3. [Hazard Analysis](#3-hazard-analysis)
4. [Risk Evaluation](#4-risk-evaluation)
5. [Risk Control](#5-risk-control)
6. [Residual Risk Analysis](#6-residual-risk-analysis)
7. [Risk/Benefit Analysis](#7-risk-benefit-analysis)
8. [Traceability Matrix](#8-traceability-matrix)
9. [Post-Production Risk Management](#9-post-production-risk-management)
10. [Appendices](#10-appendices)

---

## 1. Scope and Methodology

### 1.1 Product Description

**Product:** HemoDoctor - Clinical Decision Support System for CBC Analysis
**Intended Use:** Assist healthcare professionals in hematological diagnosis and treatment planning
**Device Classification:**
- IEC 62304 Class C (software controls potentially life-threatening hazards)
- ANVISA Class III (high risk medical device)
- FDA Class III (clinical decision support with critical clinical actions)

**Key Features:**
- Automated CBC analysis with AI/ML algorithm (HemoAI)
- Critical alert generation (anemia, thrombocytopenia, leukemia patterns)
- Suggested next steps (additional tests, specialist referral)
- Pediatric-specific analysis (5 age groups: 0-28d, 1-12m, 1-3y, 4-12y, 13-18y)
- Performance: P99 latency ≤5s, 30s timeout

### 1.2 Risk Management Standards

**Primary Standard:** ISO 14971:2019 - Medical devices — Application of risk management to medical devices
**Supporting Standards:**
- ISO/TR 24971:2020 - Guidance on the application of ISO 14971
- AAMI TIR34971:2023 - Principles and practices for medical device cybersecurity
- IEC 62366-1:2015 - Usability engineering for medical devices
- IEC 80001-1:2010 - Application of risk management for IT-networks

### 1.3 Risk Management Methodology

**Approach:** FMEA (Failure Mode and Effects Analysis) + STRIDE threat modeling (cybersecurity)

**Risk Analysis Process:**
1. **Hazard Identification:** Systematic analysis of all foreseeable hazards
2. **Risk Estimation:** Severity × Probability scoring (S1-S5, P1-P5)
3. **Risk Evaluation:** Compare against acceptability criteria
4. **Risk Control:** Design mitigations, verify effectiveness
5. **Residual Risk Assessment:** Re-evaluate after controls
6. **Risk/Benefit Analysis:** Justify residual risks with clinical benefits
7. **Post-Market Surveillance:** Monitor residual risks via PMS-001

**Risk Acceptability Criteria:**
- **LOW risk (score 1-6):** Acceptable without additional controls
- **MEDIUM risk (score 7-15):** Acceptable if ALARP (As Low As Reasonably Practicable) demonstrated
- **HIGH risk (score 16-25):** Requires mandatory risk controls to reduce to MEDIUM or LOW
- **CRITICAL risk (score >25):** Unacceptable - must eliminate or reduce to MEDIUM

**Severity Scale (S1-S5):**
- **S1 - Negligible:** No injury, minor inconvenience
- **S2 - Minor:** Temporary discomfort, no lasting harm
- **S3 - Moderate:** Reversible injury, prolonged hospitalization
- **S4 - Serious:** Irreversible injury, life-threatening event
- **S5 - Catastrophic:** Patient death

**Probability Scale (P1-P5):**
- **P1 - Improbable:** < 0.001% (1 in 100,000 uses)
- **P2 - Rare:** 0.001% - 0.1% (1 in 1,000 - 100,000 uses)
- **P3 - Occasional:** 0.1% - 1% (1 in 100 - 1,000 uses)
- **P4 - Likely:** 1% - 10% (1 in 10 - 100 uses)
- **P5 - Frequent:** > 10% (> 1 in 10 uses)

---

## 2. Risk Management Process

### 2.1 Risk Management Plan

**Objective:** Identify and mitigate all reasonably foreseeable hazards throughout the product lifecycle.

**Risk Management Activities:**

| Activity | Responsibility | Timing | Output |
|----------|----------------|--------|--------|
| Hazard Identification | Risk Team | Design phase | Hazard list |
| Risk Analysis | Risk Team | Design/Implementation | Risk matrix |
| Risk Evaluation | Risk Team + Clinical | Pre-release | Risk acceptability |
| Risk Control Design | Design Team | Implementation | Mitigations (SRS/SDD) |
| Risk Control Verification | Test Team | Validation | TEST evidence |
| Residual Risk Assessment | Risk Team | Pre-release | Residual risk report |
| Risk/Benefit Analysis | Clinical + Risk Team | Pre-release | Benefit justification |
| Post-Market Surveillance | PMS Team | Post-release | Continuous monitoring |

### 2.2 Hazard Sources Analyzed

**1. Software Failure Modes:**
- Algorithm misclassification (false negatives/positives)
- Data processing errors (incorrect calculations)
- Integration failures (API timeout, data corruption)
- Performance degradation (latency >30s)

**2. AI/ML-Specific Hazards (AAMI TIR34971):**
- Training data bias (underrepresented populations)
- Model drift (performance degradation over time)
- Lack of explainability (automation bias)
- Adversarial inputs (malicious CBC data)

**3. User Interaction Hazards:**
- Misinterpretation of alerts
- Automation bias (over-reliance on AI)
- User errors (incorrect age input)
- Inadequate training

**4. Cybersecurity Threats (STRIDE):**
- Data breaches (PHI compromise)
- Unauthorized access
- Data tampering
- Denial of service attacks

**5. Environmental Hazards:**
- Network outages
- Database corruption
- Server crashes

**6. Pediatric-Specific Hazards:**
- Age misclassification (wrong reference range)
- False alerts on physiologic variants (infant anemia)
- Missed critical pediatric conditions

---

## 3. Hazard Analysis

### 3.1 Comprehensive Hazard Table

The following table documents **34 identified hazards** across all risk categories:

| Hazard ID | Hazard Situation | Foreseeable Sequence | Harm | Severity | Probability | Risk Score | Risk Level |
|-----------|------------------|----------------------|------|----------|-------------|------------|------------|
| **FUNCTIONAL HAZARDS** |
| **RISK-HD-001** | Algorithm misclassification - **False Negative (FN) critical anemia** | Severe anemia (Hb <7 g/dL) not detected → No critical alert generated → Delayed diagnosis → Patient not transfused timely → Cardiac decompensation | Death or serious irreversible harm | **S5** | **P2** | **25** | **CRITICAL** |
| **RISK-HD-002** | Algorithm misclassification - **False Positive (FP) critical alert** | Normal CBC flagged as critical → Unnecessary urgent tests (bone marrow biopsy) → Patient anxiety, procedure complications | Moderate injury, temporary discomfort | **S3** | **P2** | **15** | **MEDIUM** |
| **RISK-HD-003** | Data processing error - **Incorrect unit conversion** | CBC data received in mg/dL instead of g/dL → Algorithm misinterprets Hb=120 mg/dL as severe anemia → False critical alert → Unnecessary intervention | Minor injury, anxiety | **S2** | **P2** | **10** | **MEDIUM** |
| **RISK-HD-004** | Data processing error - **Missing mandatory field** | Age field missing in API request → System uses default adult reference range → False alert for pediatric patient | Moderate injury (delayed pediatric diagnosis) | **S3** | **P2** | **15** | **MEDIUM** |
| **RISK-HD-005** | Integration failure - **API timeout (>30s)** | Network spike or database overload → P99 >5s escalates to 30s timeout → No HemoDoctor result returned → Clinician falls back to manual CBC interpretation (slower workflow) | Delayed time-to-diagnosis (TTD), loss of CDSS benefit | **S2** | **P2** | **10** | **MEDIUM** |
| **USABILITY HAZARDS** |
| **RISK-HD-USE-001** | Automation bias - **Over-reliance on HemoDoctor recommendation** | Clinician accepts CRITICAL alert without reviewing raw CBC → Misses concurrent condition not in HemoDoctor scope → Inappropriate treatment | Serious harm, delayed diagnosis | **S4** | **P3** | **20** | **HIGH** |
| **RISK-HD-USE-002** | Alert fatigue - **Excessive false positives desensitize users** | High FP rate → Users ignore critical alerts → Real critical case missed | Death or serious harm | **S5** | **P2** | **25** | **CRITICAL** |
| **RISK-HD-USE-003** | Misinterpretation of suggestion - **Clinician misunderstands "suggested next step"** | Clinician interprets "Consider ferritin test" as mandatory urgent action → Over-testing burden | Minor harm, patient anxiety | **S2** | **P3** | **12** | **MEDIUM** |
| **RISK-HD-USE-004** | Inadequate training - **User unfamiliar with override function** | User unable to override incorrect alert → Inappropriate treatment based on false positive | Moderate harm | **S3** | **P2** | **15** | **MEDIUM** |
| **INTEGRATION HAZARDS** |
| **RISK-HD-INT-001** | LIS integration failure - **Corrupted CBC data transmission** | LIS sends malformed JSON → HemoDoctor parsing error → No analysis generated → Silent failure (no error notification to user) | Delayed diagnosis, loss of CDSS benefit | **S3** | **P2** | **15** | **MEDIUM** |
| **RISK-HD-INT-002** | Patient ID mismatch - **Wrong patient CBC analyzed** | LIS sends PatientID=12345 with CBC from PatientID=54321 → HemoDoctor analyzes wrong patient → Incorrect treatment | Serious harm, wrong patient treatment | **S4** | **P1** | **20** | **HIGH** |
| **RISK-HD-INT-003** | Missing explainability trace - **No algorithm_trace.csv generated** | trace_id missing in API response → Clinician unable to audit decision → Cannot validate AI reasoning → Automation bias risk increased | Moderate harm (loss of auditability) | **S3** | **P2** | **15** | **MEDIUM** |
